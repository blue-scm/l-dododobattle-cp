@use 'global' as *;
@use 'sass:math';

.wide {
    @include fxdPosition(0, 0);
    background: url(#{$imgDir}wide/bg.jpg) no-repeat center / cover;
    height: 100%;
    width: 100%;

    @media (max-height: 800px) {
        height: 800px;
    }

    &::before {
        @include absPosition(null, 0, 0);
        background: linear-gradient(rgba(0, 153, 26, 0) 0%, rgba(34, 96, 44, 1) 100%);
        content: '';
        height: 278px;
        opacity: 0.6;
        width: 100%;
    }
}

.wide__content {
    @include relPosition();
    height: 100%;
}

@function getPerWideHeight($bunshi, $bunbo: 1080) {
    $per: math.div(math.floor(math.percentage(math.div($bunshi, $bunbo)) * 10), 10);
    @return $per;
}

@function getPerWideWidth($bunshi, $bunbo: 1920) {
    $per: math.div(math.floor(math.percentage(math.div($bunshi, $bunbo)) * 10), 10);
    @return $per;
}

.wide__chara {
    @include cmn-transition();
    height: 80px;
    width: 80px;

    &.-goblin-bow-green {
        @include absPosition(getPerWideHeight(-20), getPerWideWidth(110));
        transform: scale(-1, 1);
    }

    &.-slime-blue-left {
        @include absPosition(getPerWideHeight(354), getPerWideWidth(61));
    }

    &.-slime-green {
        @include absPosition(getPerWideHeight(215), getPerWideWidth(300));
    }

    &.-slime-yellow-left {
        @include absPosition(getPerWideHeight(383), getPerWideWidth(466));
    }

    &.-meercat-green {
        @include absPosition(getPerWideHeight(892), getPerWideWidth(380));
        transform: scale(-1, 1);
    }

    &.-meercat-red {
        @include absPosition(getPerWideHeight(589), getPerWideWidth(112));
    }

    &.-goblin-bow-blue {
        @include absPosition(getPerWideHeight(97), unset, unset, getPerWideWidth(538));
        transform: scale(-1, 1);
    }

    &.-fox-green {
        @include absPosition(getPerWideHeight(85), unset, unset, getPerWideWidth(109));
    }

    &.-slime-yellow-right {
        @include absPosition(getPerWideHeight(307), unset, unset, getPerWideWidth(350));
    }

    &.-slime-blue-right {
        @include absPosition(getPerWideHeight(435), unset, unset, getPerWideWidth(498));
    }

    &.-fox-blue {
        @include absPosition(getPerWideHeight(601), unset, unset, getPerWideWidth(216));
        transform: scale(-1, 1);
    }

    // スクロール中
    .-scrolling & {
        animation: moveLtoR 1s linear infinite;

        &.-goblin-bow-green,
        &.-meercat-green,
        &.-goblin-bow-blue,
        &.-fox-blue {
            animation: moveRtoL 1s linear infinite;
        }

        &.-slime-green,
        &.-slime-blue-right {
            animation-duration: 0.5s;
        }
    }

    @keyframes moveLtoR {
        0% {
            transform: translateX(0) scale(1, 1);
        }
        50% {
            transform: translateX(-10%) scale(1, 1);
        }
        51% {
            transform: translateX(-10%) scale(-1, 1);
        }
        100% {
            transform: translateX(0) scale(-1, 1);
        }
    }

    @keyframes moveRtoL {
        0% {
            transform: translateX(0) scale(-1, 1);
        }
        50% {
            transform: translateX(10%) scale(-1, 1);
        }
        51% {
            transform: translateX(10%) scale(1, 1);
        }
        100% {
            transform: translateX(0) scale(1, 1);
        }
    }
}

.wide__anime__scalewrap {
    @include cmn-transition();
    transform-origin: bottom center;

    // スクロール中
    .-scrolling & {
        transform: scale(1.3);
    }
}

.wide__anime {
    animation-play-state: paused;

    // スクロール中
    .-scrolling & {
        animation-play-state: running;
    }
}
