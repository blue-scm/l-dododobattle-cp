{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./src/es6/dododo-cp/Accordion.es6","webpack:///./src/es6/dododo-cp/handleYtPlayer.es6","webpack:///./src/es6/dododo-cp/main.es6","webpack:///./src/es6/dododo-cp/YtPlayer.es6","webpack:///./src/es6/dododo-cp/handleAccordion.es6","webpack:///./src/es6/modal.es6","webpack:///./src/es6/ua.es6"],"sourcesContent":["export class Accordion {\n    constructor(content) {\n        this.content = content;\n        this.id = content.dataset.accordion;\n        this.wrapper = content.parentNode;\n        this.parent = document.querySelector(`[data-accordion-parent=\"${this.id}\"]`);\n        this.trigger = document.querySelector(`[data-accordion-trigger=\"${this.id}\"]`);\n        this.defaultH = this.parent.offsetHeight;\n        this.contentH = 0;\n        this.open = false;\n        this.animTiming = {\n            duration: 400,\n            easing: \"ease-out\",\n            fill: \"forwards\",\n        };\n    }\n\n    registerEvent() {\n        this.trigger.addEventListener(\"click\", this.toggle.bind(this));\n    }\n\n    toggle() {\n        this.contentH = this.content.offsetHeight;\n        if (this.open) {\n            this.wrapper.animate(this.closeAnimKeyframes(this.defaultH, this.contentH), this.animTiming);\n        } else {\n            this.wrapper.animate(this.openAnimKeyframes(this.defaultH, this.contentH), this.animTiming);\n        }\n        this.open = !this.open;\n        this.parent.setAttribute(\"aria-expanded\", this.open);\n    }\n\n    openAnimKeyframes(defaultH, contentH) {\n        return [\n            {\n                height: defaultH + \"px\",\n            },\n            {\n                height: contentH + \"px\",\n            },\n        ];\n    }\n\n    closeAnimKeyframes(defaultH, contentH) {\n        return [\n            {\n                height: contentH + \"px\",\n            },\n            {\n                height: defaultH + \"px\",\n            },\n        ];\n    }\n}\n","export function handleYtPlayer(ytPlayer) {\n    // iframe_api読み込み\n    const headElem = document.getElementsByTagName(\"head\")[0];\n    const scriptElem = document.createElement(\"script\");\n    scriptElem.src = \"https://www.youtube.com/iframe_api\";\n    headElem.appendChild(scriptElem);\n\n    const containers = document.querySelectorAll(\"[data-yt-container]\");\n    const playTriggers = document.querySelectorAll(\"[data-play-trigger]\") || [];\n    const stopTriggers = document.querySelectorAll(\"[data-stop-trigger]\") || [];\n\n    // iframe_api読み込み後に発火\n    window.onYouTubeIframeAPIReady = () => {\n        containers.forEach((container) => {\n            ytPlayer.setYtPlayerIns(container);\n        });\n\n        if (playTriggers.length) {\n            playTriggers.forEach((playTrigger) => {\n                playTrigger.addEventListener(\"click\", (e) => {\n                    const containerId = e.currentTarget.dataset.playTrigger;\n                    ytPlayer.play(containerId);\n                });\n            });\n        }\n\n        if (stopTriggers.length) {\n            stopTriggers.forEach((stopTrigger) => {\n                stopTrigger.addEventListener(\"click\", (e) => {\n                    const containerId = e.currentTarget.dataset.stopTrigger;\n                    ytPlayer.stop(containerId);\n                });\n            });\n        }\n    };\n}\n","import { handleYtPlayer } from \"./handleYtPlayer.es6\";\nimport { YtPlayer } from \"./YtPlayer.es6\";\nimport { handleAccordion } from \"./handleAccordion.es6\";\nimport Modal from \"../modal.es6\";\nimport UA from \"../ua.es6\";\n\nfunction main() {\n    const ytPlayer = new YtPlayer();\n    handleYtPlayer(ytPlayer);\n    handleAccordion();\n    const modal = new Modal();\n    const ua = new UA();\n}\n\nmain();\n","export class YtPlayer {\n    constructor() {\n        this.players = {};\n    }\n\n    setYtPlayerIns(container) {\n        const videoId = container.dataset.ytContainer;\n        const playerVarsStr = container.dataset.playervars;\n        const playerVars = playerVarsStr ? JSON.parse(playerVarsStr) : {};\n        const containerId = container.id;\n        this.players[containerId] = {};\n        this.players[containerId].videoId = videoId;\n        this.players[containerId].instance = new YT.Player(containerId, {\n            width: 350,\n            height: 180,\n            videoId: videoId,\n            playerVars: playerVars,\n            events: {\n                onStateChange: this.onStateChange.bind(this),\n                onError: this.onError,\n            },\n        });\n    }\n\n    onStateChange({ target }) {\n        //同時再生させないため再生中の他のプレーヤーがあれば止める\n        Object.keys(this.players).forEach((containerId) => {\n            const player = this.players[containerId].instance;\n            if (player === target) return;\n            const state = player.getPlayerState();\n            if (state === YT.PlayerState.PLAYING) {\n                player.stopVideo();\n            }\n        });\n    }\n\n    play(containerId) {\n        this.players[containerId].instance.playVideo();\n    }\n\n    stop(containerId) {\n        this.players[containerId].instance.stopVideo();\n    }\n\n    onError(e) {\n        console.log(e);\n    }\n}\n","import { Accordion } from \"./Accordion.es6\";\n\nexport function handleAccordion() {\n    const contents = document.querySelectorAll(\"[data-accordion]\");\n    contents.forEach((content) => {\n        const accordion = new Accordion(content);\n        accordion.registerEvent();\n    });\n}\n","export default class Modal {\n    constructor() {\n        this.init();\n    }\n\n    init() {\n        this.eventBind();\n    }\n\n    resetEvent() {\n        this.eventBind(\"reset\");\n    }\n\n    eventBind(resetOption) {\n        const openbuttons = [...document.querySelectorAll(\".js-modal_open\")];\n        const closebuttons = [...document.querySelectorAll(\".js-modal_close\")];\n        const modals = [...document.querySelectorAll(\".js-modal\")];\n\n        const handleOpen = (e) => {\n            e.preventDefault();\n            const modalID = e.currentTarget.getAttribute(\"data-modalID\");\n            const tgtmodal = document.querySelector(`.js-modal[data-modalID=${modalID}]`);\n            document.body.classList.add(\"-lock\");\n            tgtmodal && tgtmodal.classList.add(\"-active\");\n        };\n\n        const handleClose = (e) => {\n            document.body.classList.remove(\"-lock\");\n            modals.forEach((el) => el.classList.remove(\"-active\"));\n        };\n\n        openbuttons.forEach((el) => {\n            resetOption && el.removeEventListener(\"click\", handleOpen);\n            el.addEventListener(\"click\", handleOpen);\n        });\n\n        closebuttons.forEach((el) => {\n            resetOption && el.removeEventListener(\"click\", handleClose);\n            el.addEventListener(\"click\", handleClose);\n        });\n    }\n}","export default class UA {\n    constructor() {\n        this.init();\n    }\n\n    init() {\n        const wrapper = document.querySelector('.wrapper');\n        let os_name = null;\n        let ua = navigator.userAgent;\n\n        if (ua.match(/Android/)) {\n            os_name = 'android';\n        } else {\n            ua = ua.toLowerCase();\n            if (ua.match(/iPhone|ipad|iphone|ipad|ipod|iPod/) || (ua.indexOf('macintosh') > -1 && 'ontouchend' in document)) {\n                os_name = 'ios';\n            } else {\n                os_name = 'others';\n            }\n        }\n\n        wrapper.setAttribute('data-os', os_name);\n    }\n}\n"],"names":["Accordion","constructor","content","this","id","dataset","accordion","wrapper","parentNode","parent","document","querySelector","trigger","defaultH","offsetHeight","contentH","open","animTiming","duration","easing","fill","registerEvent","addEventListener","toggle","bind","animate","closeAnimKeyframes","openAnimKeyframes","setAttribute","height","ytPlayer","headElem","getElementsByTagName","scriptElem","createElement","src","appendChild","containers","querySelectorAll","playTriggers","stopTriggers","window","onYouTubeIframeAPIReady","forEach","container","setYtPlayerIns","length","playTrigger","e","containerId","currentTarget","play","stopTrigger","stop","handleYtPlayer","players","videoId","ytContainer","playerVarsStr","playervars","playerVars","JSON","parse","instance","YT","Player","width","events","onStateChange","onError","target","Object","keys","player","getPlayerState","PlayerState","PLAYING","stopVideo","playVideo","console","log","init","eventBind","resetEvent","resetOption","openbuttons","closebuttons","modals","handleOpen","preventDefault","modalID","getAttribute","tgtmodal","body","classList","add","handleClose","remove","el","removeEventListener","os_name","ua","navigator","userAgent","match","toLowerCase","indexOf"],"sourceRoot":""}